
<div class="row">
  <div class="large-12 columns">
    <h1>Listing pats</h1>
    <%= search_form_for @q, url: complex_pats_path, method: :post do |f| %>
        <%= f.condition_fields do |c| %>
        <div class="row">
          <%= c.attribute_fields do |a| %>
            <div class="large-3 columns">
              <%= a.attribute_select associations: [:facility] %>
            </div>
          <% end %>
          <div class="large-3 columns">
            <%= c.predicate_select %>
          </div>
          <%= c.value_fields do |v| %>
            <div class="large-3 columns">
              <%= v.text_field :value %>
            </div>
            <div class="large-3 columns"></div>
          <% end %>
        </div> 
        <% end %>
      
        <%= f.sort_fields do |s|  %>
          <div class="row">
            <div class="large-3 columns">
              Sort: <%= s.sort_select %>
            </div>
          </div>
        <% end %>
      
      <div class="row">
        <div class="large-2 larg-offset-1 columns">
          <%= f.submit "Find", class: "button tiny radius" %>
        </div>
      </div>
      
    <% end %>
  </div>
</div>

<div class="row">
  <div class="large-12 columnms">
    <table>
      <thead>
        <tr class="tableHeader">
          <th>FID</th>
          <th><%= sort_link(@q, :firstname) %></th>
          <th><%= sort_link(@q, :lastname) %></th>
          <th><%= sort_link(@q, :number) %></th>
          <th>Ward</th>
          <th><%= sort_link(@q, :doa, "Admission") %></th>
          <th><%= sort_link(@q, :dob, "Birth") %></th>
          <th><%= sort_link(@q, :dod, "Discharge") %></th>
        </tr>
      </thead>

      <tbody>
        <% @pats.each do |pat| %>
          <tr>
            <td><%= pat.facility_id %></td>
            <td><%= pat.firstname %></td>
            <td><%= pat.lastname %></td>
            <td><%= pat.number %></td>
            <td><%= pat.ward %></td>
            <td><%= pat.doa %></td>
            <td><%= pat.dob %></td>
            <td><%= pat.dod %></td>
          </tr>
        <% end %>
          <tr>
            <td colspan="5" class="tableFooter">
              <%= paginate @pats %>
            </td>
            <td colspan="3" class="tableFooter">
              <%= @searchNumber %> from <%= @totNumber %> total
            </td>
          </tr>
      </tbody>
    </table>
  </div>
</div>

